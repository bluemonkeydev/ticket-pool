{% extends "base.html" %}

{% block title %}{% if not require_current %}Set Password{% else %}Change Password{% endif %} - {{ config.APP_NAME }}{% endblock %}

{% block content %}
<div class="page-wrapper page-wrapper--centered">
    <div class="card auth-card">
        <div class="card-header">
            <h1>{% if not require_current %}Set Your Password{% else %}Change Password{% endif %}</h1>
            {% if not require_current %}
            <p>Welcome! Please set a new password to continue</p>
            {% else %}
            <p>Enter your current password and choose a new one</p>
            {% endif %}
        </div>

        <form method="POST">
            {{ form.hidden_tag() }}

            {% if require_current %}
            <div class="form-group">
                {{ form.current_password.label }}
                {{ form.current_password(class="form-control", placeholder="Enter current password") }}
                {% for error in form.current_password.errors %}
                <span class="error">{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}

            <div class="form-group">
                {{ form.new_password.label }}
                {{ form.new_password(class="form-control", placeholder="Enter new password") }}
                {% for error in form.new_password.errors %}
                <span class="error">{{ error }}</span>
                {% endfor %}
            </div>

            <div class="form-group">
                {{ form.confirm_password.label }}
                {{ form.confirm_password(class="form-control", placeholder="Confirm new password") }}
                {% for error in form.confirm_password.errors %}
                <span class="error">{{ error }}</span>
                {% endfor %}
            </div>

            <button type="submit" class="btn btn-primary btn-block">
                {% if not require_current %}Set Password{% else %}Change Password{% endif %}
            </button>
        </form>

        {% if require_current %}
        <div class="card-footer">
            <a href="{{ url_for('events.dashboard') }}">Back to Dashboard</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
